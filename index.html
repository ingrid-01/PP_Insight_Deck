<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ïù∏ÏÇ¨Ïù¥Ìä∏ Îç± (Insight Deck)</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Noto+Serif+KR:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="stylesheet" href="style.css" />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Noto Sans KR"', "sans-serif"],
              serif: ['"Noto Serif KR"', "serif"],
            },
            colors: {
              primary: {
                DEFAULT: "#3E5C53",
                light: "#5B7C72",
                dark: "#2A4039",
              },
              accent: {
                nonfiction: "#648F73",
                fiction: "#B38F64",
                news: "#7D8FA1",
                movie: "#8E7CC3",
                art: "#D0607A",
                media: "#E08E79",
                dialogue: "#9A7D64",
                action: "#3E5C53",
              },
              background: {
                DEFAULT: "#F5F3F0",
                card: "#FFFFFF",
                hover: "#F9F8F6",
                section: "#EFECE8",
              },
              text: { main: "#333333", sub: "#666666", muted: "#999999" },
              border: "#E0DCD5",
            },
          },
        },
      };
    </script>
    <style>
      body,
      div,
      nav,
      button,
      input,
      textarea,
      header,
      section,
      article {
        transition:
          background-color 0.3s ease,
          border-color 0.3s ease,
          color 0.3s ease;
      }
    </style>
  </head>
  <body
    class="font-sans text-text-main bg-background transition-colors duration-300 dark:bg-gray-900 dark:text-gray-100"
  >
    <div
      class="w-full bg-gray-900 text-white/90 text-[10px] md:text-xs font-bold text-center py-1.5 z-[60] relative"
    >
      üöß v0.1 (Work in Progress) &nbsp;|&nbsp; üöÄ ÏûëÏóÖÏ§ë
    </div>
    <header
      class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-border px-4 lg:px-8 py-3 flex items-center justify-between shadow-sm dark:bg-gray-800/90 dark:border-gray-700 transition-all duration-300"
    >
      <div
        class="flex items-center gap-4 cursor-pointer group"
        onclick="resetDashboard()"
      >
        <div
          class="size-10 bg-primary rounded-xl flex items-center justify-center shadow-sm group-hover:scale-105 transition-transform"
        >
          <span class="material-symbols-outlined text-white !text-[26px]"
            >menu_book</span
          >
        </div>
        <div class="hidden md:block">
          <h1
            data-i18n="logo.title"
            class="font-black text-xl tracking-tight text-text-main leading-none mb-0.5 dark:text-white"
          >
            Insight Deck
          </h1>
          <p
            data-i18n="logo.subtitle"
            class="text-[10px] text-text-sub font-bold tracking-widest uppercase dark:text-gray-400"
          >
            Know Thyself
          </p>
        </div>
      </div>

      <nav class="flex items-center gap-3 lg:gap-8 text-sm font-semibold">
        <a
          href="#"
          id="nav-hub"
          onclick="switchView('hub')"
          data-i18n-title="nav.hub"
          class="flex items-center gap-2 text-primary relative after:absolute after:bottom-[-22px] after:left-0 after:w-full after:h-0.5 after:bg-primary dark:text-primary-light"
          title="Conversation Hub"
        >
          <span class="material-symbols-outlined !text-[22px]">hub</span>
          <span data-i18n="nav.hub" class="hidden lg:inline"
            >Conversation Hub</span
          >
        </a>

        <a
          href="#"
          id="nav-archive"
          onclick="switchView('archive')"
          class="flex items-center gap-2 text-text-sub hover:text-primary transition-colors dark:text-gray-400 dark:hover:text-primary-light"
          title="Archive"
        >
          <span class="material-symbols-outlined !text-[22px]"
            >inventory_2</span
          >
          <span data-i18n="nav.archive" class="hidden lg:inline">Archive</span>
        </a>

        <a
          href="#"
          id="nav-stats"
          onclick="switchView('stats')"
          class="flex items-center gap-2 text-text-sub hover:text-primary transition-colors dark:text-gray-400 dark:hover:text-primary-light"
          title="Statistics"
        >
          <span class="material-symbols-outlined !text-[22px]">bar_chart</span>
          <span data-i18n="nav.stats" class="hidden lg:inline">Statistics</span>
        </a>
      </nav>
      <div class="flex items-center gap-2 lg:gap-4">
        <div class="relative max-w-[240px] w-full hidden md:block">
          <span
            class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted !text-[20px]"
            >search</span
          >
          <input
            type="text"
            id="desktop-search"
            data-i18n="searchPlaceholder"
            placeholder="Search..."
            class="w-full pl-10 pr-4 py-2 bg-background-section border border-transparent rounded-full text-sm font-medium focus:outline-none focus:bg-white focus:border-primary-light transition-all placeholder:text-text-muted dark:bg-gray-700 dark:text-white dark:focus:bg-gray-600 dark:placeholder-gray-400"
          />
        </div>

        <button
          onclick="toggleMobileSearch()"
          class="md:hidden size-9 rounded-full bg-background-section flex items-center justify-center text-text-sub hover:bg-border transition-all dark:bg-gray-700 dark:text-gray-300"
        >
          <span class="material-symbols-outlined !text-[20px]">search</span>
        </button>

        <button
          id="new-insight-btn"
          class="btn-primary flex items-center gap-2 bg-primary text-white px-3 lg:px-5 py-2 lg:py-2.5 rounded-full text-sm font-bold hover:bg-primary-dark transition-all shadow-sm active:scale-[0.98] whitespace-nowrap shrink-0"
        >
          <span class="material-symbols-outlined !text-[20px]">add_circle</span>
          <span data-i18n="newInsightBtn" class="hidden lg:inline"
            >New Insight</span
          >
        </button>

        <div class="relative">
          <button
            id="notification-btn"
            class="relative size-9 rounded-full bg-background-section flex items-center justify-center text-text-sub hover:bg-border transition-all focus:outline-none dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"
          >
            <span class="material-symbols-outlined !text-[20px]"
              >notifications</span
            >
            <span
              id="notification-badge"
              class="hidden absolute top-0 right-0 size-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"
            ></span>
          </button>
          <div
            id="notification-dropdown"
            class="hidden absolute right-0 top-full mt-3 w-80 bg-white rounded-2xl shadow-xl border border-border z-[200] overflow-hidden origin-top-right transition-all dark:bg-gray-800 dark:border-gray-700"
          >
            <div
              class="px-5 py-4 border-b border-border bg-gray-50 flex justify-between items-center dark:bg-gray-700 dark:border-gray-600"
            >
              <h3 class="font-bold text-sm text-text-main dark:text-white">
                Notifications
              </h3>
              <span
                id="btn-read-all"
                class="text-[10px] font-bold text-primary cursor-pointer hover:underline dark:text-primary-light"
                >Read All</span
              >
            </div>
            <ul id="notification-list" class="max-h-64 overflow-y-auto"></ul>
          </div>
        </div>

        <div class="relative">
          <button
            id="profile-btn"
            class="size-9 rounded-full bg-accent-fiction/20 border-2 border-white shadow-sm overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary transition-all focus:outline-none dark:border-gray-600"
            title="ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï"
          >
            <img
              id="profile-img"
              src=""
              alt="Profile"
              class="w-full h-full object-cover"
            />
          </button>
          <div
            id="profile-dropdown"
            class="hidden absolute right-0 top-full mt-3 w-80 bg-white rounded-2xl shadow-xl border border-border z-[200] overflow-hidden origin-top-right transition-all dark:bg-gray-800 dark:border-gray-700"
          >
            <div
              class="px-5 py-5 border-b border-border bg-gradient-to-br from-[#F5F3F0] to-white relative overflow-hidden dark:from-gray-700 dark:to-gray-800 dark:border-gray-600"
            >
              <div class="absolute top-0 right-0 p-4 opacity-10">
                <span class="material-symbols-outlined text-[60px] text-primary"
                  >military_tech</span
                >
              </div>
              <div class="relative z-10">
                <div class="flex justify-between items-end mb-1">
                  <p
                    id="profile-level-badge"
                    class="text-xs font-black text-primary bg-primary/10 px-2 py-0.5 rounded text-center dark:bg-primary/20 dark:text-primary-light"
                  >
                    Lv.0
                  </p>
                  <span
                    id="profile-next-goal"
                    class="text-[10px] text-text-muted font-bold dark:text-gray-400"
                    >Îã§Ïùå: Í∏∞Î°ù 1Í∞ú</span
                  >
                </div>
                <h3
                  id="profile-name-display"
                  class="font-black text-lg text-text-main leading-tight dark:text-white"
                >
                  Lisa
                </h3>
                <p
                  id="profile-title-display"
                  class="text-xs font-bold text-text-sub mb-3 dark:text-gray-300"
                >
                  Insight Newbie
                </p>
                <div
                  class="w-full bg-border/50 h-2 rounded-full overflow-hidden mb-2 dark:bg-gray-600"
                >
                  <div
                    id="profile-progress-bar"
                    class="bg-primary h-full rounded-full transition-all duration-1000"
                    style="width: 5%"
                  ></div>
                </div>
                <p
                  id="profile-desc-display"
                  class="text-[10px] text-text-muted font-medium leading-relaxed dark:text-gray-400"
                >
                  ...
                </p>
              </div>
            </div>
            <div class="p-2 space-y-1">
              <button
                onclick="editProfileName()"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-background-hover text-left transition-colors group dark:hover:bg-gray-700"
              >
                <span
                  class="material-symbols-outlined text-text-sub group-hover:text-primary text-[18px] dark:text-gray-400 dark:group-hover:text-primary-light"
                  >edit</span
                ><span
                  data-i18n="profile.editName"
                  class="text-xs font-bold text-text-sub group-hover:text-text-main dark:text-gray-300 dark:group-hover:text-white"
                  >Ïù¥Î¶Ñ Î≥ÄÍ≤Ω</span
                >
              </button>
              <button
                onclick="editProfileImage()"
                class="w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-background-hover text-left transition-colors group dark:hover:bg-gray-700"
              >
                <span
                  class="material-symbols-outlined text-text-sub group-hover:text-primary text-[18px] dark:text-gray-400 dark:group-hover:text-primary-light"
                  >account_circle</span
                ><span
                  data-i18n="profile.editPhoto"
                  class="text-xs font-bold text-text-sub group-hover:text-text-main dark:text-gray-300 dark:group-hover:text-white"
                  >ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î≥ÄÍ≤Ω</span
                >
              </button>
            </div>
            <div class="h-px bg-border mx-2 dark:bg-gray-700"></div>
            <div class="p-4 space-y-4">
              <div class="flex items-center justify-between">
                <span
                  class="text-xs font-bold text-text-sub flex items-center gap-1.5 dark:text-gray-400"
                  ><span class="material-symbols-outlined text-[16px]"
                    >language</span
                  >
                  <span data-i18n="profile.lang">Ïñ∏Ïñ¥</span></span
                >
                <div
                  class="flex bg-background-section p-1 rounded-lg dark:bg-gray-700"
                >
                  <button
                    id="btn-lang-kr"
                    onclick="setLanguage('ko')"
                    class="px-2 py-0.5 text-[10px] font-bold rounded bg-white shadow-sm text-primary transition-all dark:bg-gray-600 dark:text-white"
                  >
                    KR</button
                  ><button
                    id="btn-lang-en"
                    onclick="setLanguage('en')"
                    class="px-2 py-0.5 text-[10px] font-bold rounded text-text-muted hover:text-text-main transition-all dark:text-gray-400 dark:hover:text-white"
                  >
                    EN
                  </button>
                </div>
              </div>
              <div class="flex items-center justify-between">
                <span
                  class="text-xs font-bold text-text-sub flex items-center gap-1.5 dark:text-gray-400"
                  ><span class="material-symbols-outlined text-[16px]"
                    >dark_mode</span
                  >
                  <span data-i18n="profile.theme">ÌÖåÎßà</span></span
                >
                <div
                  class="flex bg-background-section p-1 rounded-lg dark:bg-gray-700"
                >
                  <button
                    id="btn-theme-light"
                    onclick="setTheme('light')"
                    class="px-2 py-0.5 text-[10px] font-bold rounded bg-white shadow-sm text-primary transition-all"
                  >
                    Light</button
                  ><button
                    id="btn-theme-dark"
                    onclick="setTheme('dark')"
                    class="px-2 py-0.5 text-[10px] font-bold rounded text-text-muted hover:text-text-main transition-all"
                  >
                    Dark
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        id="mobile-search-bar"
        class="hidden absolute left-0 top-full w-full bg-white border-b border-border p-3 shadow-md z-40 dark:bg-gray-800 dark:border-gray-700"
      >
        <div class="relative w-full">
          <span
            class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted !text-[20px]"
            >search</span
          >
          <input
            type="text"
            id="mobile-search-input"
            data-i18n="searchPlaceholder"
            placeholder="Search..."
            class="w-full pl-10 pr-4 py-2.5 bg-background-section border border-transparent rounded-xl text-sm font-medium focus:outline-none focus:bg-white focus:border-primary-light transition-all placeholder:text-text-muted dark:bg-gray-700 dark:text-white dark:focus:bg-gray-600 dark:placeholder-gray-400"
          />
        </div>
      </div>
    </header>
    <main class="max-w-7xl mx-auto px-6 lg:px-8 py-10">
      <div
        id="view-hub"
        class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-10 animation-fade"
      >
        <div class="lg:col-span-12 mb-2">
          <div
            id="daily-reflection-card"
            class="bg-gradient-to-r from-primary to-[#2A4039] rounded-3xl p-6 md:p-8 text-white shadow-lg relative overflow-hidden hidden"
          >
            <div
              class="absolute top-0 right-0 -mr-8 -mt-8 size-40 rounded-full bg-white/10 blur-2xl"
            ></div>

            <div
              class="relative z-10 grid grid-cols-1 md:grid-cols-3 gap-8 items-center"
            >
              <div class="md:col-span-2 space-y-4">
                <div class="flex items-center gap-2 mb-1">
                  <span
                    class="px-2 py-1 rounded bg-white/20 text-[10px] font-bold uppercase tracking-wider"
                    >Today's Question</span
                  >
                  <button
                    onclick="refreshDailyReflection()"
                    class="text-white/70 hover:text-white transition-colors"
                    title="Îã§Î•∏ ÏßàÎ¨∏ Î≥¥Í∏∞"
                  >
                    <span class="material-symbols-outlined !text-[18px]"
                      >refresh</span
                    >
                  </button>
                </div>

                <h3
                  id="daily-question"
                  class="text-xl md:text-2xl font-black leading-snug serif"
                ></h3>

                <div
                  class="bg-white/10 border border-white/20 rounded-xl p-4 backdrop-blur-sm"
                >
                  <div
                    class="flex items-center gap-2 mb-2 text-white/60 text-xs font-bold"
                  >
                    <span class="material-symbols-outlined !text-[14px]"
                      >history</span
                    >
                    <span id="daily-target-date">Jan 2025</span> Ïùò Í∏∞Î°ù
                  </div>
                  <p id="daily-target-title" class="font-bold text-lg mb-1">
                    Ï†úÎ™©
                  </p>
                  <p
                    id="daily-target-content"
                    class="text-sm text-white/80 line-clamp-2"
                  >
                    ÎÇ¥Ïö©...
                  </p>
                </div>
              </div>

              <div class="md:col-span-1 flex flex-col gap-3">
                <textarea
                  id="daily-answer"
                  rows="3"
                  class="w-full rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-white/50 text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent resize-none"
                  placeholder="Ïù¥ ÏßàÎ¨∏Ïóê ÎåÄÌïú ÌòÑÏû¨Ïùò ÏÉùÍ∞ÅÏùÄ?"
                ></textarea>
                <button
                  onclick="saveDailyReflection()"
                  class="w-full py-3 rounded-xl bg-white text-primary font-bold text-sm hover:bg-gray-100 transition-colors shadow-md flex items-center justify-center gap-2"
                >
                  <span class="material-symbols-outlined !text-[18px]"
                    >edit_note</span
                  >
                  Í∏∞Î°ùÏóê ÎçßÎ∂ôÏù¥Í∏∞
                </button>
              </div>
            </div>
          </div>
        </div>
        <aside class="lg:col-span-3 space-y-8">
          <section
            class="bg-white rounded-3xl p-6 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="flex items-center justify-between mb-5">
              <h2
                data-i18n="sidebar.map"
                class="font-black text-lg dark:text-white"
              >
                ÎÇòÏùò ÏßÄÏãù ÏßÄÎèÑ
              </h2>
              <span
                class="material-symbols-outlined text-text-muted cursor-pointer hover:text-primary"
                >bubble_chart</span
              >
            </div>
            <div
              class="h-4 w-full rounded-full bg-background-section overflow-hidden flex mb-4 dark:bg-gray-700"
            >
              <div
                id="bar-nonfiction"
                class="h-full bg-accent-nonfiction transition-all duration-1000"
                style="width: 0%"
              ></div>
              <div
                id="bar-news"
                class="h-full bg-accent-news transition-all duration-1000"
                style="width: 0%"
              ></div>
              <div
                id="bar-movie"
                class="h-full bg-accent-movie transition-all duration-1000"
                style="width: 0%"
              ></div>
              <div
                id="bar-media"
                class="h-full bg-accent-media transition-all duration-1000"
                style="width: 0%"
              ></div>
              <div
                id="bar-art"
                class="h-full bg-accent-art transition-all duration-1000"
                style="width: 0%"
              ></div>
              <div
                id="bar-fiction"
                class="h-full bg-accent-fiction transition-all duration-1000"
                style="width: 0%"
              ></div>
            </div>
            <div class="grid grid-cols-3 gap-y-4 gap-x-2 text-center mb-6">
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-nonfiction"></span
                  ><span
                    data-i18n="sidebar.graph.nonfiction"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >Non-Fi</span
                  >
                </div>
                <span
                  id="pct-nonfiction"
                  class="text-xs font-black text-accent-nonfiction"
                  >0%</span
                >
              </div>
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-news"></span
                  ><span
                    data-i18n="sidebar.graph.news"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >News</span
                  >
                </div>
                <span id="pct-news" class="text-xs font-black text-accent-news"
                  >0%</span
                >
              </div>
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-movie"></span
                  ><span
                    data-i18n="sidebar.graph.movie"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >Movie</span
                  >
                </div>
                <span
                  id="pct-movie"
                  class="text-xs font-black text-accent-movie"
                  >0%</span
                >
              </div>
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-media"></span
                  ><span
                    data-i18n="sidebar.graph.media"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >Media</span
                  >
                </div>
                <span
                  id="pct-media"
                  class="text-xs font-black text-accent-media"
                  >0%</span
                >
              </div>
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-art"></span
                  ><span
                    data-i18n="sidebar.graph.art"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >Art</span
                  >
                </div>
                <span id="pct-art" class="text-xs font-black text-accent-art"
                  >0%</span
                >
              </div>
              <div class="flex flex-col items-center">
                <div class="flex items-center gap-1.5 mb-1">
                  <span class="size-2 rounded-full bg-accent-fiction"></span
                  ><span
                    data-i18n="sidebar.graph.fiction"
                    class="text-[10px] font-bold text-text-sub uppercase dark:text-gray-400"
                    >Fiction</span
                  >
                </div>
                <span
                  id="pct-fiction"
                  class="text-xs font-black text-text-muted"
                  >0%</span
                >
              </div>
            </div>
            <div
              class="grid grid-cols-3 gap-4 border-t border-border pt-5 dark:border-gray-700"
            >
              <div class="text-center">
                <span
                  id="stat-month"
                  class="block font-black text-2xl text-primary leading-tight dark:text-primary-light"
                  >3</span
                ><span
                  data-i18n="sidebar.thisMonth"
                  class="text-[10px] font-bold text-text-muted uppercase tracking-wider dark:text-gray-500"
                  >This Month</span
                >
              </div>
              <div class="text-center">
                <span
                  id="stat-hub"
                  class="block font-black text-2xl text-accent-dialogue leading-tight"
                  >0</span
                ><span
                  data-i18n="sidebar.hub"
                  class="text-[10px] font-bold text-text-muted uppercase tracking-wider dark:text-gray-500"
                  >Hub</span
                >
              </div>
              <div class="text-center">
                <span
                  id="stat-total"
                  class="block font-black text-2xl text-text-main leading-tight dark:text-white"
                  >3</span
                ><span
                  data-i18n="sidebar.total"
                  class="text-[10px] font-bold text-text-muted uppercase tracking-wider dark:text-gray-500"
                  >Total</span
                >
              </div>
            </div>
          </section>
          <section>
            <h3
              class="font-bold text-sm text-text-sub mb-4 uppercase tracking-wider flex items-center gap-2 dark:text-gray-400"
            >
              <span class="material-symbols-outlined !text-[18px]"
                >filter_list</span
              >
              <span data-i18n="sidebar.filter">Filters</span>
            </h3>
            <div class="flex flex-wrap gap-2">
              <button
                id="filter-all"
                onclick="setFilter('all')"
                class="px-3 py-1.5 rounded-full bg-primary text-white text-xs font-bold shadow-sm transition-all"
              >
                All
              </button>
              <button
                id="filter-nonfiction"
                onclick="setFilter('nonfiction')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                Non-fiction
              </button>
              <button
                id="filter-fiction"
                onclick="setFilter('fiction')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                Fiction
              </button>
              <button
                id="filter-news"
                onclick="setFilter('news')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                News
              </button>
              <button
                id="filter-movie"
                onclick="setFilter('movie')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                Movie
              </button>
              <button
                id="filter-art"
                onclick="setFilter('art')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                Art
              </button>
              <button
                id="filter-media"
                onclick="setFilter('media')"
                class="px-3 py-1.5 rounded-full bg-white border border-border text-text-sub text-xs font-bold transition-all hover:text-primary dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:text-primary-light"
              >
                Media
              </button>
            </div>
          </section>
        </aside>

        <div
          class="lg:col-span-9 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8 items-start"
        >
          <section id="zone-ready" class="space-y-5">
            <div class="flex items-center justify-between">
              <h3
                class="font-black text-lg flex items-center gap-2 dark:text-white"
              >
                <span class="size-2.5 rounded-full bg-accent-dialogue"></span>
                Ready
              </h3>
              <span
                id="count-ready"
                class="text-xs font-bold text-text-muted bg-background-section px-2.5 py-1 rounded-full dark:bg-gray-700 dark:text-gray-400"
                >0</span
              >
            </div>
          </section>
          <section id="zone-logged" class="space-y-5">
            <div class="flex items-center justify-between">
              <h3
                class="font-black text-lg flex items-center gap-2 dark:text-white"
              >
                <span class="size-2.5 rounded-full bg-primary"></span> Logged
              </h3>
              <span
                id="count-logged"
                class="text-xs font-bold text-text-muted bg-background-section px-2.5 py-1 rounded-full dark:bg-gray-700 dark:text-gray-400"
                >0</span
              >
            </div>
          </section>
          <section id="zone-internalized" class="space-y-5">
            <div class="flex items-center justify-between">
              <h3
                class="font-black text-lg flex items-center gap-2 dark:text-white"
              >
                <span class="size-2.5 rounded-full bg-accent-nonfiction"></span>
                Internalized
              </h3>
              <span
                id="count-internalized"
                class="text-xs font-bold text-text-muted bg-background-section px-2.5 py-1 rounded-full dark:bg-gray-700 dark:text-gray-400"
                >0</span
              >
            </div>
          </section>
        </div>
      </div>

      <div id="view-stats" class="hidden animation-fade space-y-10">
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div
            class="bg-white rounded-3xl p-6 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="flex items-center gap-3 mb-2">
              <span
                class="p-2 rounded-xl bg-primary/10 text-primary material-symbols-outlined"
                >library_books</span
              >
              <h4
                data-i18n="stats.total"
                class="font-bold text-text-sub dark:text-gray-400"
              >
                Total Insights
              </h4>
            </div>
            <p
              id="stats-total-count"
              class="text-3xl font-black text-text-main dark:text-white"
            >
              0
            </p>
          </div>
          <div
            class="bg-white rounded-3xl p-6 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="flex items-center gap-3 mb-2">
              <span
                class="p-2 rounded-xl bg-accent-fire/10 text-accent-fire material-symbols-outlined text-orange-500"
                >local_fire_department</span
              >
              <h4
                data-i18n="stats.streak"
                class="font-bold text-text-sub dark:text-gray-400"
              >
                Current Streak
              </h4>
            </div>
            <p
              id="stats-streak"
              class="text-3xl font-black text-text-main dark:text-white"
            >
              0 days
            </p>
          </div>
          <div
            class="bg-white rounded-3xl p-6 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="flex items-center gap-3 mb-2">
              <span
                class="p-2 rounded-xl bg-accent-movie/10 text-accent-movie material-symbols-outlined"
                >calendar_month</span
              >
              <h4
                data-i18n="stats.month"
                class="font-bold text-text-sub dark:text-gray-400"
              >
                This Month
              </h4>
            </div>
            <p
              id="stats-month-count"
              class="text-3xl font-black text-text-main dark:text-white"
            >
              0
            </p>
          </div>
        </section>

        <section
          class="bg-white rounded-3xl p-8 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
        >
          <h3
            data-i18n="stats.heatmapTitle"
            class="font-black text-xl mb-6 dark:text-white"
          >
            Activity Log (1 Year)
          </h3>
          <div class="overflow-x-auto pb-2">
            <div
              id="heatmap-grid"
              class="grid grid-rows-7 grid-flow-col gap-1 w-max min-w-[700px]"
            ></div>
          </div>
          <div
            class="flex justify-end items-center gap-2 mt-4 text-xs font-bold text-text-muted"
          >
            <span data-i18n="stats.less">Less</span>
            <div class="size-3 rounded-sm bg-gray-100 dark:bg-gray-700"></div>
            <div class="size-3 rounded-sm bg-primary/30"></div>
            <div class="size-3 rounded-sm bg-primary/60"></div>
            <div class="size-3 rounded-sm bg-primary"></div>
            <span data-i18n="stats.more">More</span>
          </div>
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <div
            class="bg-white rounded-3xl p-8 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <h3
              data-i18n="stats.catAnalysis"
              class="font-black text-xl mb-6 dark:text-white"
            >
              Category Analysis
            </h3>
            <div id="stats-category-list" class="space-y-4"></div>
          </div>

          <div
            class="bg-primary/5 rounded-3xl p-8 border border-primary/10 dark:bg-gray-700/50 dark:border-gray-600"
          >
            <h3
              data-i18n="stats.suggestion"
              class="font-black text-xl mb-4 text-primary dark:text-primary-light"
            >
              Insight Coach
            </h3>
            <p
              id="stats-coach-msg"
              class="text-sm text-text-main leading-7 font-medium dark:text-gray-200"
            >
              Îç∞Ïù¥ÌÑ∞Î•º Î∂ÑÏÑù Ï§ëÏûÖÎãàÎã§...
            </p>
          </div>
        </section>
        <section
          class="bg-white rounded-3xl p-8 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700 overflow-hidden"
        >
          <div class="flex items-center justify-between mb-6">
            <h3
              data-i18n="stats.graphTitle"
              class="font-black text-xl dark:text-white"
            >
              Knowledge Graph
            </h3>
            <span
              class="text-xs font-bold text-text-sub bg-background-section px-2 py-1 rounded dark:bg-gray-700 dark:text-gray-400"
              >Live View</span
            >
          </div>
          <div
            class="w-full h-[400px] bg-[#F9FAFB] rounded-2xl border border-border relative overflow-hidden dark:bg-gray-900 dark:border-gray-600"
          >
            <canvas id="knowledge-graph" class="w-full h-full"></canvas>
          </div>
        </section>

        <section
          class="bg-gradient-to-br from-primary/5 to-primary/10 rounded-3xl p-8 border border-primary/10 dark:from-gray-800 dark:to-gray-700 dark:border-gray-600"
        >
          <h3
            data-i18n="stats.badgeTitle"
            class="font-black text-xl mb-6 text-primary dark:text-primary-light flex items-center gap-2"
          >
            <span class="material-symbols-outlined">military_tech</span> Hall of
            Fame
          </h3>

          <div class="mb-8">
            <div class="flex justify-between items-end mb-2">
              <span
                id="stats-lvl-name"
                class="font-bold text-lg text-text-main dark:text-white"
                >Insight Newbie</span
              >
              <span
                id="stats-lvl-progress"
                class="text-xs font-bold text-text-primary dark:text-primary-light"
                >3 / 5 Insights</span
              >
            </div>
            <div
              class="w-full bg-white h-4 rounded-full overflow-hidden shadow-inner dark:bg-gray-900"
            >
              <div
                id="stats-lvl-bar"
                class="bg-gradient-to-r from-primary-light to-primary h-full rounded-full transition-all duration-1000 relative"
                style="width: 0%"
              >
                <div
                  class="absolute right-0 top-0 bottom-0 w-full animate-pulse bg-white/20"
                ></div>
              </div>
            </div>
            <p
              id="stats-lvl-msg"
              class="text-xs text-text-muted mt-2 text-right"
            >
              Keep going!
            </p>
          </div>

          <div
            id="badge-list"
            class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"
          ></div>
        </section>
      </div>
      <div
        id="view-archive"
        class="hidden animation-fade grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"
      >
        <aside class="lg:col-span-3 sticky top-24">
          <div
            class="bg-white rounded-3xl p-6 border border-border shadow-sm dark:bg-gray-800 dark:border-gray-700"
          >
            <h3
              data-i18n="archive.collections"
              class="font-black text-lg mb-4 flex items-center gap-2 dark:text-white"
            >
              <span class="material-symbols-outlined">style</span> Collections
            </h3>
            <div id="archive-tags" class="flex flex-wrap gap-2"></div>
          </div>
        </aside>

        <div class="lg:col-span-9 space-y-8">
          <div
            class="flex justify-between items-end border-b border-border pb-4 dark:border-gray-700"
          >
            <div>
              <h2
                data-i18n="archive.title"
                class="text-2xl font-black text-text-main dark:text-white"
              >
                The Library
              </h2>
              <p
                data-i18n="archive.subtitle"
                class="text-sm text-text-sub mt-1 dark:text-gray-400"
              >
                Where verified insights rest.
              </p>
            </div>
            <div class="text-right">
              <span
                id="archive-count"
                class="text-3xl font-black text-primary dark:text-primary-light"
                >0</span
              >
              <span class="text-xs font-bold text-text-muted uppercase block"
                >Archived</span
              >
            </div>
          </div>

          <div
            id="archive-timeline"
            class="space-y-10 relative before:absolute before:left-4 before:top-2 before:h-full before:w-0.5 before:bg-border dark:before:bg-gray-700"
          >
            <div class="pl-12 py-10 text-text-muted text-sm font-medium italic">
              ÏïÑÏßÅ ÏÑúÏû¨Í∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§. 'Internalized' ÏÉÅÌÉúÍ∞Ä Îêú ÌÜµÏ∞∞Ïù¥ Ïù¥Í≥≥ÏúºÎ°ú
              Ïù¥ÎèôÌï©ÎãàÎã§.
            </div>
          </div>
        </div>
      </div>
    </main>
    <div
      id="write-modal"
      class="fixed inset-0 z-[100] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg dark:bg-gray-800"
          >
            <div
              class="bg-primary px-4 py-3 sm:px-6 flex justify-between items-center"
            >
              <h3
                data-i18n="modal.title"
                class="text-base font-bold leading-6 text-white"
              >
                New Insight
              </h3>
              <button
                type="button"
                id="close-modal-btn"
                class="text-white hover:text-gray-200"
              >
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <form id="insight-form" class="px-4 py-5 sm:p-6 space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label
                    data-i18n="modal.cat"
                    class="block text-xs font-bold text-text-sub mb-1 dark:text-gray-400"
                    >Category</label
                  >
                  <select
                    id="input-category"
                    class="w-full rounded-lg border-border text-sm focus:border-primary focus:ring-primary bg-background-section dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                  >
                    <option value="nonfiction">Non-fiction</option>
                    <option value="fiction">Fiction</option>
                    <option value="news">News</option>
                    <option value="movie">Movie</option>
                    <option value="art">Art</option>
                    <option value="media">Media</option>
                  </select>
                </div>
                <div>
                  <label
                    data-i18n="modal.date"
                    class="block text-xs font-bold text-text-sub mb-1 dark:text-gray-400"
                    >Date</label
                  >
                  <input
                    type="text"
                    id="input-date"
                    data-i18n="modal.datePlaceholder"
                    placeholder="Ex) Jan 2026"
                    class="w-full rounded-lg border-border text-sm focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                  />
                </div>
              </div>
              <div>
                <label
                  data-i18n="modal.titleLabel"
                  class="block text-xs font-bold text-text-sub mb-1 dark:text-gray-400"
                  >Title</label
                >
                <input
                  type="text"
                  id="input-title"
                  required
                  class="w-full rounded-lg border-border text-sm font-bold focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                />
              </div>
              <div>
                <label
                  data-i18n="modal.msgLabel"
                  class="block text-xs font-bold text-text-sub mb-1 dark:text-gray-400"
                  >Core Message</label
                >
                <textarea
                  id="input-content"
                  rows="3"
                  required
                  class="w-full rounded-lg border-border text-sm focus:border-primary focus:ring-primary resize-none dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                ></textarea>
              </div>
              <div class="pt-2">
                <button
                  type="submit"
                  data-i18n="modal.saveBtn"
                  class="w-full rounded-full bg-primary px-3 py-3 text-sm font-bold text-white hover:bg-primary-dark transition-all"
                >
                  Save Insight
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div
      id="log-type-modal"
      class="fixed inset-0 z-[110] hidden"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
        onclick="closeLogModal()"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm dark:bg-gray-800"
          >
            <div
              class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4 dark:bg-gray-800"
            >
              <h3
                data-i18n="logModal.title"
                class="text-lg font-black leading-6 text-text-main mb-4 dark:text-white"
              >
                Add Log
              </h3>
              <div class="space-y-3">
                <button
                  onclick="selectLogType('reflect')"
                  class="w-full flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent-dialogue/10 hover:border-accent-dialogue transition-all group dark:border-gray-600 dark:hover:bg-gray-700"
                >
                  <span
                    class="material-symbols-outlined text-accent-dialogue group-hover:scale-110 transition-transform"
                    >psychology_alt</span
                  >
                  <div class="text-left">
                    <p
                      data-i18n="logModal.reflect.title"
                      class="text-sm font-bold text-text-main dark:text-gray-200"
                    >
                      Self-Reflection
                    </p>
                  </div>
                </button>
                <button
                  onclick="selectLogType('action')"
                  class="w-full flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent-action/10 hover:border-accent-action transition-all group dark:border-gray-600 dark:hover:bg-gray-700"
                >
                  <span
                    class="material-symbols-outlined text-accent-action group-hover:scale-110 transition-transform"
                    >bolt</span
                  >
                  <div class="text-left">
                    <p
                      data-i18n="logModal.action.title"
                      class="text-sm font-bold text-text-main dark:text-gray-200"
                    >
                      Action Item
                    </p>
                  </div>
                </button>
                <button
                  onclick="selectLogType('dialogue')"
                  class="w-full flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-primary/10 hover:border-primary transition-all group dark:border-gray-600 dark:hover:bg-gray-700"
                >
                  <span
                    class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform"
                    >forum</span
                  >
                  <div class="text-left">
                    <p
                      data-i18n="logModal.dialogue.title"
                      class="text-sm font-bold text-text-main dark:text-gray-200"
                    >
                      Dialogue Log
                    </p>
                  </div>
                </button>
                <button
                  onclick="selectLogType('topic')"
                  class="w-full flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent-news/10 hover:border-accent-news transition-all group dark:border-gray-600 dark:hover:bg-gray-700"
                >
                  <span
                    class="material-symbols-outlined text-accent-news group-hover:scale-110 transition-transform"
                    >chat_bubble</span
                  >
                  <div class="text-left">
                    <p
                      data-i18n="logModal.topic.title"
                      class="text-sm font-bold text-text-main dark:text-gray-200"
                    >
                      Discussion Topic
                    </p>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="rich-input-modal"
      class="fixed inset-0 z-[120] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg border border-border dark:bg-gray-800 dark:border-gray-700"
          >
            <div
              class="bg-white px-4 py-4 sm:px-6 border-b border-border flex justify-between items-center dark:bg-gray-800 dark:border-gray-700"
            >
              <div>
                <h3
                  class="text-lg font-black leading-6 text-text-main flex items-center gap-2 dark:text-white"
                  id="rich-modal-title"
                ></h3>
              </div>
              <button
                type="button"
                onclick="closeRichInputModal()"
                class="text-text-sub hover:text-text-main transition-colors dark:text-gray-400 dark:hover:text-white"
              >
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="px-6 py-6 bg-[#F9FAFB] dark:bg-gray-900">
              <p
                id="rich-modal-desc"
                class="text-sm text-text-sub mb-4 font-medium dark:text-gray-400"
              ></p>
              <div
                id="input-container"
                class="flex flex-col gap-4 rounded-xl bg-white border border-[#d1d5db] p-1 focus-within:border-primary focus-within:ring-1 focus-within:ring-primary shadow-sm transition-all dark:bg-gray-800 dark:border-gray-600"
              >
                <textarea
                  id="rich-input-field"
                  data-i18n="richModal.placeholder"
                  class="w-full min-h-[140px] resize-none border-none bg-transparent p-4 text-text-main placeholder:text-[#9ca3af] focus:ring-0 text-base leading-relaxed dark:text-white dark:placeholder-gray-500"
                  placeholder="Type here..."
                ></textarea>
              </div>
              <div class="mt-4 flex items-center gap-2">
                <span
                  class="material-symbols-outlined text-[#9ca3af] text-[18px]"
                  >sell</span
                >
                <input
                  type="text"
                  data-i18n="richModal.tagPlaceholder"
                  placeholder="Tags"
                  class="w-full bg-transparent border-none text-sm text-text-main placeholder:text-[#9ca3af] focus:ring-0 p-0 dark:text-gray-300"
                />
              </div>
            </div>
            <div
              class="bg-white px-4 py-4 sm:flex sm:flex-row-reverse sm:px-6 border-t border-border dark:bg-gray-800 dark:border-gray-700"
            >
              <button
                type="button"
                onclick="saveRichInput()"
                class="inline-flex w-full justify-center rounded-xl bg-primary px-5 py-3 text-sm font-bold text-white shadow-md hover:bg-primary-light sm:ml-3 sm:w-auto transition-all flex items-center gap-2"
              >
                <span class="material-symbols-outlined text-[18px]">save</span>
                <span data-i18n="richModal.save">Save</span>
              </button>
              <button
                type="button"
                onclick="closeRichInputModal()"
                class="mt-3 inline-flex w-full justify-center rounded-xl bg-white px-5 py-3 text-sm font-bold text-text-sub shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto transition-all dark:bg-gray-700 dark:text-gray-300 dark:ring-gray-600 dark:hover:bg-gray-600"
              >
                <span data-i18n="richModal.cancel">Cancel</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="name-modal"
      class="fixed inset-0 z-[130] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all w-full max-w-sm border border-border dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="bg-white px-5 py-5 sm:p-6 dark:bg-gray-800">
              <h3
                data-i18n="nameModal.title"
                class="text-lg font-black leading-6 text-text-main mb-2 dark:text-white"
              >
                Change Name
              </h3>
              <p
                data-i18n="nameModal.desc"
                class="text-xs text-text-sub mb-4 dark:text-gray-400"
              >
                Enter new nickname
              </p>
              <input
                type="text"
                id="input-profile-name"
                data-i18n="nameModal.placeholder"
                class="w-full rounded-xl border-border text-sm font-bold focus:border-primary focus:ring-primary py-3 text-center bg-background-section dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Name"
                maxlength="10"
              />
              <p
                id="name-error-msg"
                class="text-[10px] text-red-500 font-bold mt-2 hidden text-center"
              ></p>
            </div>
            <div
              class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-border dark:bg-gray-800 dark:border-gray-700"
            >
              <button
                type="button"
                onclick="saveProfileName()"
                data-i18n="nameModal.applyBtn"
                class="inline-flex w-full justify-center rounded-xl bg-primary px-5 py-2.5 text-sm font-bold text-white shadow-sm hover:bg-primary-dark sm:ml-3 sm:w-auto transition-all"
              >
                Apply
              </button>
              <button
                type="button"
                onclick="closeNameModal()"
                data-i18n="nameModal.cancelBtn"
                class="mt-3 inline-flex w-full justify-center rounded-xl bg-white px-5 py-2.5 text-sm font-bold text-text-sub shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto transition-all dark:bg-gray-700 dark:text-gray-300 dark:ring-gray-600 dark:hover:bg-gray-600"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="photo-modal"
      class="fixed inset-0 z-[140] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all w-full max-w-sm border border-border dark:bg-gray-800 dark:border-gray-700"
          >
            <div class="bg-white px-5 py-5 sm:p-6 dark:bg-gray-800">
              <h3
                data-i18n="photoModal.title"
                class="text-lg font-black leading-6 text-text-main mb-4 dark:text-white"
              >
                Profile Settings
              </h3>
              <div class="flex justify-center mb-6">
                <div
                  class="size-24 rounded-full border-4 border-white shadow-lg overflow-hidden ring-1 ring-border dark:border-gray-700 dark:ring-gray-600"
                >
                  <img
                    id="preview-profile-img"
                    src=""
                    alt="Preview"
                    class="w-full h-full object-cover"
                  />
                </div>
              </div>
              <div class="mb-4">
                <p
                  data-i18n="photoModal.colorLabel"
                  class="text-xs font-bold text-text-sub mb-3 dark:text-gray-400"
                >
                  Background Color
                </p>
                <div class="grid grid-cols-5 gap-3 justify-items-center">
                  <button
                    onclick="selectBgColor('B38F64')"
                    class="size-8 rounded-full bg-[#B38F64] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('3E5C53')"
                    class="size-8 rounded-full bg-[#3E5C53] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('648F73')"
                    class="size-8 rounded-full bg-[#648F73] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('7D8FA1')"
                    class="size-8 rounded-full bg-[#7D8FA1] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('8E7CC3')"
                    class="size-8 rounded-full bg-[#8E7CC3] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('D0607A')"
                    class="size-8 rounded-full bg-[#D0607A] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('E08E79')"
                    class="size-8 rounded-full bg-[#E08E79] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('333333')"
                    class="size-8 rounded-full bg-[#333333] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('666666')"
                    class="size-8 rounded-full bg-[#666666] hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                  <button
                    onclick="selectBgColor('000000')"
                    class="size-8 rounded-full bg-black hover:scale-110 transition-transform ring-2 ring-transparent focus:ring-primary"
                  ></button>
                </div>
              </div>
              <div
                class="border-t border-border pt-4 mt-4 dark:border-gray-700"
              >
                <p
                  data-i18n="photoModal.uploadLabel"
                  class="text-xs font-bold text-text-sub mb-2 dark:text-gray-400"
                >
                  Upload Image
                </p>
                <input
                  type="file"
                  id="profile-upload-input"
                  accept="image/*"
                  class="hidden"
                />
                <button
                  onclick="triggerFileUpload()"
                  class="w-full py-2 border border-dashed border-border rounded-xl text-xs text-text-muted flex items-center justify-center gap-2 hover:bg-background-hover hover:border-primary hover:text-primary transition-all dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
                >
                  <span class="material-symbols-outlined text-[16px]"
                    >upload</span
                  >
                  <span data-i18n="photoModal.uploadBtn">Choose File</span>
                </button>
              </div>
            </div>
            <div
              class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-border dark:bg-gray-800 dark:border-gray-700"
            >
              <button
                type="button"
                onclick="saveProfileImage()"
                data-i18n="photoModal.applyBtn"
                class="inline-flex w-full justify-center rounded-xl bg-primary px-5 py-2.5 text-sm font-bold text-white shadow-sm hover:bg-primary-dark sm:ml-3 sm:w-auto transition-all"
              >
                Apply
              </button>
              <button
                type="button"
                onclick="closePhotoModal()"
                data-i18n="photoModal.cancelBtn"
                class="mt-3 inline-flex w-full justify-center rounded-xl bg-white px-5 py-2.5 text-sm font-bold text-text-sub shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto transition-all dark:bg-gray-700 dark:text-gray-300 dark:ring-gray-600 dark:hover:bg-gray-600"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="detail-modal"
      class="fixed inset-0 z-[150] hidden"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity backdrop-blur-sm"
        onclick="closeDetailModal()"
      ></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center"
        >
          <div
            class="relative transform overflow-hidden rounded-3xl bg-white text-left shadow-2xl transition-all w-full max-w-2xl border border-border dark:bg-gray-800 dark:border-gray-700"
          >
            <div
              class="bg-background px-6 py-4 border-b border-border flex justify-between items-start dark:bg-gray-900 dark:border-gray-700"
            >
              <div>
                <span
                  id="detail-category-badge"
                  class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-wider mb-2"
                ></span>
                <h3
                  id="detail-title"
                  class="text-xl font-black text-text-main leading-tight serif dark:text-white"
                ></h3>
                <p
                  id="detail-date"
                  class="text-xs font-bold text-text-muted mt-1 dark:text-gray-400"
                ></p>
              </div>
              <button
                type="button"
                onclick="closeDetailModal()"
                class="text-text-sub hover:text-text-main p-1 rounded-full hover:bg-gray-200 transition-all dark:text-gray-400 dark:hover:bg-gray-700"
              >
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>

            <div
              class="px-6 py-6 max-h-[60vh] overflow-y-auto bg-white dark:bg-gray-800"
            >
              <div class="mb-8">
                <h4
                  data-i18n="modal.msgLabel"
                  class="text-xs font-bold text-text-muted uppercase tracking-wider mb-2"
                >
                  Core Message
                </h4>
                <p
                  id="detail-content"
                  class="text-base text-text-main leading-relaxed font-medium whitespace-pre-wrap dark:text-gray-200"
                ></p>
                <div id="detail-tags" class="flex flex-wrap gap-2 mt-3"></div>
              </div>

              <hr class="border-border my-6 dark:border-gray-700" />

              <div id="detail-logs-container" class="space-y-4"></div>
            </div>

            <div
              class="bg-gray-50 px-6 py-4 border-t border-border flex justify-end gap-3 dark:bg-gray-900 dark:border-gray-700"
            >
              <button
                id="detail-restore-btn"
                onclick=""
                class="hidden px-4 py-2 rounded-xl bg-white border border-border text-text-sub text-sm font-bold hover:text-primary hover:border-primary transition-all dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300"
              >
                <span class="flex items-center gap-2"
                  ><span class="material-symbols-outlined !text-[18px]"
                    >history</span
                  >
                  <span data-i18n="archive.restoreBtn">Restore</span></span
                >
              </button>
              <button
                id="detail-add-log-btn"
                onclick=""
                class="px-5 py-2 rounded-xl bg-primary text-white text-sm font-bold shadow-sm hover:bg-primary-dark transition-all"
              >
                <span class="flex items-center gap-2"
                  ><span class="material-symbols-outlined !text-[18px]"
                    >edit_note</span
                  >
                  <span data-i18n="logBtn">Add Log</span></span
                >
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
